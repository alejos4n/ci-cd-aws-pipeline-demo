{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.230.0"},"children":{"CiCdAwsPipelineDemoStack":{"id":"CiCdAwsPipelineDemoStack","path":"CiCdAwsPipelineDemoStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.230.0"},"children":{"Pipeline":{"id":"Pipeline","path":"CiCdAwsPipelineDemoStack/Pipeline","constructInfo":{"fqn":"aws-cdk-lib.pipelines.CodePipeline","version":"2.230.0"},"children":{"Pipeline":{"id":"Pipeline","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline","constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.Pipeline","version":"2.230.0","metadata":[]},"children":{"ArtifactsBucket":{"id":"ArtifactsBucket","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/ArtifactsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/ArtifactsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"aws:kms"}}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true}}}},"Policy":{"id":"Policy","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/ArtifactsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/ArtifactsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"PipelineArtifactsBucketAEA9A052"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Principal":{"AWS":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::210615636037:role/cdk-hnb659fds-deploy-role-210615636037-us-east-2"]]}},"Resource":[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}}}},"Role":{"id":"Role","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codepipeline.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}]},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineCodeBuildActionRole226DB0CB","Arn"]}},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::210615636037:role/cdk-hnb659fds-deploy-role-210615636037-us-east-2"]]}},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":{"Fn::GetAtt":["PipelinetestManualapprovalbeforeproductionCodePipelineActionRoleEB1EEFD9","Arn"]}}],"Version":"2012-10-17"},"policyName":"PipelineRoleDefaultPolicy7BDC1ABB","roles":[{"Ref":"PipelineRoleB27FAA37"}]}}}}}}},"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.CfnPipeline","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodePipeline::Pipeline","aws:cdk:cloudformation:props":{"artifactStore":{"type":"S3","location":{"Ref":"PipelineArtifactsBucketAEA9A052"}},"name":"TestPipeline","pipelineType":"V1","restartExecutionOnUpdate":true,"roleArn":{"Fn::GetAtt":["PipelineRoleB27FAA37","Arn"]},"stages":[{"name":"Source","actions":[{"name":"alejos4n_ci-cd-aws-pipeline-demo","outputArtifacts":[{"name":"alejos4n_ci_cd_aws_pipeline_demo_Source"}],"actionTypeId":{"category":"Source","version":"1","owner":"ThirdParty","provider":"GitHub"},"configuration":{"Owner":"alejos4n","Repo":"ci-cd-aws-pipeline-demo","Branch":"main","OAuthToken":"{{resolve:secretsmanager:github-token:SecretString:::}}","PollForSourceChanges":false},"runOrder":1}]},{"name":"Build","actions":[{"name":"Synth","inputArtifacts":[{"name":"alejos4n_ci_cd_aws_pipeline_demo_Source"}],"outputArtifacts":[{"name":"Synth_Output"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"PipelineBuildSynthCdkBuildProject6BEFA8E6"},"EnvironmentVariables":"[{\"name\":\"_PROJECT_CONFIG_HASH\",\"type\":\"PLAINTEXT\",\"value\":\"9846e726ec481ed25679c0170187f40b4920586fd0e7314d24f56620d9f53f5b\"}]"},"runOrder":1,"roleArn":{"Fn::GetAtt":["PipelineCodeBuildActionRole226DB0CB","Arn"]}}]},{"name":"UpdatePipeline","actions":[{"name":"SelfMutate","inputArtifacts":[{"name":"Synth_Output"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"PipelineUpdatePipelineSelfMutationDAA41400"},"EnvironmentVariables":"[{\"name\":\"_PROJECT_CONFIG_HASH\",\"type\":\"PLAINTEXT\",\"value\":\"93e2b219d0e24a4ac508480fc4a938d62ab560cd4434207d1435427ac9ce27db\"}]"},"runOrder":1,"roleArn":{"Fn::GetAtt":["PipelineCodeBuildActionRole226DB0CB","Arn"]}}]},{"name":"Assets","actions":[{"name":"LambdaFunction_Code","inputArtifacts":[{"name":"Synth_Output"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"PipelineAssetsFileAsset185A67CB4"}},"runOrder":1,"roleArn":{"Fn::GetAtt":["PipelineCodeBuildActionRole226DB0CB","Arn"]}}]},{"name":"test","actions":[{"name":"Run_Unit_Tests","inputArtifacts":[{"name":"alejos4n_ci_cd_aws_pipeline_demo_Source"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"PipelinetestRunUnitTestsRunUnitTests257BFF42"}},"runOrder":1,"roleArn":{"Fn::GetAtt":["PipelineCodeBuildActionRole226DB0CB","Arn"]}},{"name":"LambdaStack.Prepare","inputArtifacts":[{"name":"Synth_Output"}],"actionTypeId":{"category":"Deploy","version":"1","owner":"AWS","provider":"CloudFormation"},"configuration":{"StackName":"test-LambdaStack","Capabilities":"CAPABILITY_NAMED_IAM,CAPABILITY_AUTO_EXPAND","RoleArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::210615636037:role/cdk-hnb659fds-cfn-exec-role-210615636037-us-east-2"]]},"ActionMode":"CHANGE_SET_REPLACE","ChangeSetName":"PipelineChange","TemplatePath":"Synth_Output::assembly-CiCdAwsPipelineDemoStack-test/CiCdAwsPipelineDemoStacktestLambdaStack1106B6BF.template.json"},"runOrder":2,"roleArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::210615636037:role/cdk-hnb659fds-deploy-role-210615636037-us-east-2"]]}},{"name":"LambdaStack.Deploy","actionTypeId":{"category":"Deploy","version":"1","owner":"AWS","provider":"CloudFormation"},"configuration":{"StackName":"test-LambdaStack","ActionMode":"CHANGE_SET_EXECUTE","ChangeSetName":"PipelineChange"},"runOrder":3,"roleArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::210615636037:role/cdk-hnb659fds-deploy-role-210615636037-us-east-2"]]}},{"name":"Manual_approval_before_production","actionTypeId":{"category":"Approval","version":"1","owner":"AWS","provider":"Manual"},"runOrder":4,"roleArn":{"Fn::GetAtt":["PipelinetestManualapprovalbeforeproductionCodePipelineActionRoleEB1EEFD9","Arn"]}}]},{"name":"prod","actions":[{"name":"Prepare","inputArtifacts":[{"name":"Synth_Output"}],"actionTypeId":{"category":"Deploy","version":"1","owner":"AWS","provider":"CloudFormation"},"configuration":{"StackName":"prod-LambdaStack","Capabilities":"CAPABILITY_NAMED_IAM,CAPABILITY_AUTO_EXPAND","RoleArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::210615636037:role/cdk-hnb659fds-cfn-exec-role-210615636037-us-east-2"]]},"ActionMode":"CHANGE_SET_REPLACE","ChangeSetName":"PipelineChange","TemplatePath":"Synth_Output::assembly-CiCdAwsPipelineDemoStack-prod/CiCdAwsPipelineDemoStackprodLambdaStackAA6F3422.template.json"},"runOrder":1,"roleArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::210615636037:role/cdk-hnb659fds-deploy-role-210615636037-us-east-2"]]}},{"name":"Deploy","actionTypeId":{"category":"Deploy","version":"1","owner":"AWS","provider":"CloudFormation"},"configuration":{"StackName":"prod-LambdaStack","ActionMode":"CHANGE_SET_EXECUTE","ChangeSetName":"PipelineChange"},"runOrder":2,"roleArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::210615636037:role/cdk-hnb659fds-deploy-role-210615636037-us-east-2"]]}}]}]}}},"Source":{"id":"Source","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Source","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"},"children":{"alejos4n_ci-cd-aws-pipeline-demo":{"id":"alejos4n_ci-cd-aws-pipeline-demo","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Source/alejos4n_ci-cd-aws-pipeline-demo","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"},"children":{"WebhookResource":{"id":"WebhookResource","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Source/alejos4n_ci-cd-aws-pipeline-demo/WebhookResource","constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.CfnWebhook","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodePipeline::Webhook","aws:cdk:cloudformation:props":{"authentication":"GITHUB_HMAC","authenticationConfiguration":{"secretToken":"{{resolve:secretsmanager:github-token:SecretString:::}}"},"filters":[{"jsonPath":"$.ref","matchEquals":"refs/heads/{Branch}"}],"registerWithThirdParty":true,"targetAction":"alejos4n_ci-cd-aws-pipeline-demo","targetPipeline":{"Ref":"Pipeline9850B417"},"targetPipelineVersion":1}}}}}}},"Build":{"id":"Build","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Build","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"},"children":{"Synth":{"id":"Synth","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Build/Synth","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"},"children":{"CdkBuildProject":{"id":"CdkBuildProject","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Build/Synth/CdkBuildProject","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"2.230.0","metadata":[]},"children":{"Role":{"id":"Role","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Build/Synth/CdkBuildProject/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Build/Synth/CdkBuildProject/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Build/Synth/CdkBuildProject/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Build/Synth/CdkBuildProject/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Build/Synth/CdkBuildProject/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:us-east-2:210615636037:log-group:/aws/codebuild/",{"Ref":"PipelineBuildSynthCdkBuildProject6BEFA8E6"}]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:us-east-2:210615636037:log-group:/aws/codebuild/",{"Ref":"PipelineBuildSynthCdkBuildProject6BEFA8E6"},":*"]]}]},{"Action":["codebuild:CreateReportGroup","codebuild:CreateReport","codebuild:UpdateReport","codebuild:BatchPutTestCases","codebuild:BatchPutCodeCoverages"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codebuild:us-east-2:210615636037:report-group/",{"Ref":"PipelineBuildSynthCdkBuildProject6BEFA8E6"},"-*"]]}},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"PipelineBuildSynthCdkBuildProjectRoleDefaultPolicyFB6C941C","roles":[{"Ref":"PipelineBuildSynthCdkBuildProjectRole231EEA2A"}]}}}}}}},"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Build/Synth/CdkBuildProject/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"NO_CACHE"},"description":"Pipeline step CiCdAwsPipelineDemoStack/Pipeline/Build/Synth","encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":false,"computeType":"BUILD_GENERAL1_SMALL"},"serviceRole":{"Fn::GetAtt":["PipelineBuildSynthCdkBuildProjectRole231EEA2A","Arn"]},"source":{"type":"CODEPIPELINE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"build\": {\n      \"commands\": [\n        \"npm ci\",\n        \"npm run build\",\n        \"npx cdk synth\"\n      ]\n    }\n  },\n  \"artifacts\": {\n    \"base-directory\": \"cdk.out\",\n    \"files\": \"**/*\"\n  }\n}"}}}}}}}}}},"UpdatePipeline":{"id":"UpdatePipeline","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/UpdatePipeline","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"},"children":{"SelfMutate":{"id":"SelfMutate","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/UpdatePipeline/SelfMutate","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"}}}},"Assets":{"id":"Assets","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Assets","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"},"children":{"LambdaFunction_Code":{"id":"LambdaFunction_Code","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/Assets/LambdaFunction_Code","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"}}}},"test":{"id":"test","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/test","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"},"children":{"Run_Unit_Tests":{"id":"Run_Unit_Tests","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/test/Run_Unit_Tests","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"},"children":{"Run Unit Tests":{"id":"Run Unit Tests","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/test/Run_Unit_Tests/Run Unit Tests","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"2.230.0","metadata":[]},"children":{"Role":{"id":"Role","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/test/Run_Unit_Tests/Run Unit Tests/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/test/Run_Unit_Tests/Run Unit Tests/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/test/Run_Unit_Tests/Run Unit Tests/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/test/Run_Unit_Tests/Run Unit Tests/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/test/Run_Unit_Tests/Run Unit Tests/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:us-east-2:210615636037:log-group:/aws/codebuild/",{"Ref":"PipelinetestRunUnitTestsRunUnitTests257BFF42"}]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:us-east-2:210615636037:log-group:/aws/codebuild/",{"Ref":"PipelinetestRunUnitTestsRunUnitTests257BFF42"},":*"]]}]},{"Action":["codebuild:CreateReportGroup","codebuild:CreateReport","codebuild:UpdateReport","codebuild:BatchPutTestCases","codebuild:BatchPutCodeCoverages"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codebuild:us-east-2:210615636037:report-group/",{"Ref":"PipelinetestRunUnitTestsRunUnitTests257BFF42"},"-*"]]}},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"PipelinetestRunUnitTestsRunUnitTestsRoleDefaultPolicyAC38D98D","roles":[{"Ref":"PipelinetestRunUnitTestsRunUnitTestsRole809C0405"}]}}}}}}},"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/test/Run_Unit_Tests/Run Unit Tests/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"NO_CACHE"},"description":"Pipeline step CiCdAwsPipelineDemoStack/Pipeline/test/Run_Unit_Tests","encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":false,"computeType":"BUILD_GENERAL1_SMALL"},"serviceRole":{"Fn::GetAtt":["PipelinetestRunUnitTestsRunUnitTestsRole809C0405","Arn"]},"source":{"type":"CODEPIPELINE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"build\": {\n      \"commands\": [\n        \"npm install\",\n        \"npm test\"\n      ]\n    }\n  }\n}"}}}}}}}},"LambdaStack.Prepare":{"id":"LambdaStack.Prepare","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/test/LambdaStack.Prepare","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"}},"LambdaStack.Deploy":{"id":"LambdaStack.Deploy","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/test/LambdaStack.Deploy","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"}},"Manual_approval_before_production":{"id":"Manual_approval_before_production","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/test/Manual_approval_before_production","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"},"children":{"CodePipelineActionRole":{"id":"CodePipelineActionRole","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/test/Manual_approval_before_production/CodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportCodePipelineActionRole":{"id":"ImportCodePipelineActionRole","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/test/Manual_approval_before_production/CodePipelineActionRole/ImportCodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/test/Manual_approval_before_production/CodePipelineActionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["PipelineRoleB27FAA37","Arn"]}}}],"Version":"2012-10-17"}}}}}}}}}},"MutableRolearn:${AWS::Partition}:iam::210615636037:role--cdk-hnb659fds-deploy-role-210615636037-us-east-2":{"id":"MutableRolearn:${AWS::Partition}:iam::210615636037:role--cdk-hnb659fds-deploy-role-210615636037-us-east-2","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/MutableRolearn:${AWS::Partition}:iam::210615636037:role--cdk-hnb659fds-deploy-role-210615636037-us-east-2","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"arn:${AWS::Partition}:iam::210615636037:role--cdk-hnb659fds-deploy-role-210615636037-us-east-2":{"id":"arn:${AWS::Partition}:iam::210615636037:role--cdk-hnb659fds-deploy-role-210615636037-us-east-2","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/arn:${AWS::Partition}:iam::210615636037:role--cdk-hnb659fds-deploy-role-210615636037-us-east-2","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]},"children":{"8389e75f-0810-4838-bf64-d6f85a95cf83":{"id":"8389e75f-0810-4838-bf64-d6f85a95cf83","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/arn:${AWS::Partition}:iam::210615636037:role--cdk-hnb659fds-deploy-role-210615636037-us-east-2/8389e75f-0810-4838-bf64-d6f85a95cf83","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"}}}},"MutableRolearn:${AWS::Partition}:iam::210615636037:role--cdk-hnb659fds-cfn-exec-role-210615636037-us-east-2":{"id":"MutableRolearn:${AWS::Partition}:iam::210615636037:role--cdk-hnb659fds-cfn-exec-role-210615636037-us-east-2","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/MutableRolearn:${AWS::Partition}:iam::210615636037:role--cdk-hnb659fds-cfn-exec-role-210615636037-us-east-2","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"arn:${AWS::Partition}:iam::210615636037:role--cdk-hnb659fds-cfn-exec-role-210615636037-us-east-2":{"id":"arn:${AWS::Partition}:iam::210615636037:role--cdk-hnb659fds-cfn-exec-role-210615636037-us-east-2","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/arn:${AWS::Partition}:iam::210615636037:role--cdk-hnb659fds-cfn-exec-role-210615636037-us-east-2","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"prod":{"id":"prod","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/prod","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"},"children":{"Prepare":{"id":"Prepare","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/prod/Prepare","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"}},"Deploy":{"id":"Deploy","path":"CiCdAwsPipelineDemoStack/Pipeline/Pipeline/prod/Deploy","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"}}}}}},"CodeBuildActionRole":{"id":"CodeBuildActionRole","path":"CiCdAwsPipelineDemoStack/Pipeline/CodeBuildActionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportCodeBuildActionRole":{"id":"ImportCodeBuildActionRole","path":"CiCdAwsPipelineDemoStack/Pipeline/CodeBuildActionRole/ImportCodeBuildActionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/CodeBuildActionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["PipelineRoleB27FAA37","Arn"]}}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CiCdAwsPipelineDemoStack/Pipeline/CodeBuildActionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/CodeBuildActionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineBuildSynthCdkBuildProject6BEFA8E6","Arn"]}},{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineUpdatePipelineSelfMutationDAA41400","Arn"]}},{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineAssetsFileAsset185A67CB4","Arn"]}},{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PipelinetestRunUnitTestsRunUnitTests257BFF42","Arn"]}}],"Version":"2012-10-17"},"policyName":"PipelineCodeBuildActionRoleDefaultPolicy1D62A6FE","roles":[{"Ref":"PipelineCodeBuildActionRole226DB0CB"}]}}}}}}},"UpdatePipeline":{"id":"UpdatePipeline","path":"CiCdAwsPipelineDemoStack/Pipeline/UpdatePipeline","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"},"children":{"SelfMutation":{"id":"SelfMutation","path":"CiCdAwsPipelineDemoStack/Pipeline/UpdatePipeline/SelfMutation","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"2.230.0","metadata":[]},"children":{"Role":{"id":"Role","path":"CiCdAwsPipelineDemoStack/Pipeline/UpdatePipeline/SelfMutation/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"CiCdAwsPipelineDemoStack/Pipeline/UpdatePipeline/SelfMutation/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/UpdatePipeline/SelfMutation/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CiCdAwsPipelineDemoStack/Pipeline/UpdatePipeline/SelfMutation/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/UpdatePipeline/SelfMutation/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:us-east-2:210615636037:log-group:/aws/codebuild/",{"Ref":"PipelineUpdatePipelineSelfMutationDAA41400"}]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:us-east-2:210615636037:log-group:/aws/codebuild/",{"Ref":"PipelineUpdatePipelineSelfMutationDAA41400"},":*"]]}]},{"Action":["codebuild:CreateReportGroup","codebuild:CreateReport","codebuild:UpdateReport","codebuild:BatchPutTestCases","codebuild:BatchPutCodeCoverages"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codebuild:us-east-2:210615636037:report-group/",{"Ref":"PipelineUpdatePipelineSelfMutationDAA41400"},"-*"]]}},{"Action":"sts:AssumeRole","Condition":{"ForAnyValue:StringEquals":{"iam:ResourceTag/aws-cdk:bootstrap-role":["image-publishing","file-publishing","deploy"]}},"Effect":"Allow","Resource":"arn:*:iam::210615636037:role/*"},{"Action":"cloudformation:DescribeStacks","Effect":"Allow","Resource":"*"},{"Action":"s3:ListBucket","Effect":"Allow","Resource":"*"},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"PipelineUpdatePipelineSelfMutationRoleDefaultPolicyA225DA4E","roles":[{"Ref":"PipelineUpdatePipelineSelfMutationRole57E559E8"}]}}}}}}},"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/UpdatePipeline/SelfMutation/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"NO_CACHE"},"description":"Pipeline step CiCdAwsPipelineDemoStack/Pipeline/UpdatePipeline/SelfMutate","encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":false,"computeType":"BUILD_GENERAL1_SMALL"},"name":"TestPipeline-selfupdate","serviceRole":{"Fn::GetAtt":["PipelineUpdatePipelineSelfMutationRole57E559E8","Arn"]},"source":{"type":"CODEPIPELINE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"install\": {\n      \"commands\": [\n        \"npm install -g aws-cdk@2\"\n      ]\n    },\n    \"build\": {\n      \"commands\": [\n        \"cdk -a . deploy CiCdAwsPipelineDemoStack --require-approval=never --verbose\"\n      ]\n    }\n  }\n}"}}}}}}}},"Assets":{"id":"Assets","path":"CiCdAwsPipelineDemoStack/Pipeline/Assets","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"},"children":{"FileRole":{"id":"FileRole","path":"CiCdAwsPipelineDemoStack/Pipeline/Assets/FileRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportFileRole":{"id":"ImportFileRole","path":"CiCdAwsPipelineDemoStack/Pipeline/Assets/FileRole/ImportFileRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/Assets/FileRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CiCdAwsPipelineDemoStack/Pipeline/Assets/FileRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/Assets/FileRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:us-east-2:210615636037:log-group:/aws/codebuild/*"]]}},{"Action":["codebuild:CreateReportGroup","codebuild:CreateReport","codebuild:UpdateReport","codebuild:BatchPutTestCases","codebuild:BatchPutCodeCoverages"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codebuild:us-east-2:210615636037:report-group/*"]]}},{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":"*"},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":{"Fn::Sub":"arn:${AWS::Partition}:iam::210615636037:role/cdk-hnb659fds-file-publishing-role-210615636037-us-east-2"}},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"PipelineAssetsFileRoleDefaultPolicy14DB8755","roles":[{"Ref":"PipelineAssetsFileRole59943A77"}]}}}}}}},"FileAsset1":{"id":"FileAsset1","path":"CiCdAwsPipelineDemoStack/Pipeline/Assets/FileAsset1","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/Pipeline/Assets/FileAsset1/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"NO_CACHE"},"description":"Pipeline step CiCdAwsPipelineDemoStack/Pipeline/Assets/LambdaFunction_Code","encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":false,"computeType":"BUILD_GENERAL1_SMALL"},"serviceRole":{"Fn::GetAtt":["PipelineAssetsFileRole59943A77","Arn"]},"source":{"type":"CODEPIPELINE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"install\": {\n      \"commands\": [\n        \"npm install -g cdk-assets@latest\"\n      ]\n    },\n    \"build\": {\n      \"commands\": [\n        \"cdk-assets --path \\\"assembly-CiCdAwsPipelineDemoStack-test/CiCdAwsPipelineDemoStacktestLambdaStack1106B6BF.assets.json\\\" --verbose publish \\\"d609efb58e3d1d45a8eca2e10c38177e8c5f81b2af952cb64ccae7c9b194c2c2:210615636037-us-east-2-56e78605\\\"\"\n      ]\n    }\n  }\n}"}}}}}}}}}},"test":{"id":"test","path":"CiCdAwsPipelineDemoStack/test","constructInfo":{"fqn":"aws-cdk-lib.Stage","version":"2.230.0"},"children":{"LambdaStack":{"id":"LambdaStack","path":"CiCdAwsPipelineDemoStack/test/LambdaStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.230.0"},"children":{"LambdaFunction":{"id":"LambdaFunction","path":"CiCdAwsPipelineDemoStack/test/LambdaStack/LambdaFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CiCdAwsPipelineDemoStack/test/LambdaStack/LambdaFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CiCdAwsPipelineDemoStack/test/LambdaStack/LambdaFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/test/LambdaStack/LambdaFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"Code":{"id":"Code","path":"CiCdAwsPipelineDemoStack/test/LambdaStack/LambdaFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"CiCdAwsPipelineDemoStack/test/LambdaStack/LambdaFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"CiCdAwsPipelineDemoStack/test/LambdaStack/LambdaFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/test/LambdaStack/LambdaFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-210615636037-us-east-2","s3Key":"d609efb58e3d1d45a8eca2e10c38177e8c5f81b2af952cb64ccae7c9b194c2c2.zip"},"environment":{"variables":{"stageName":"test"}},"handler":"handler.handler","role":{"Fn::GetAtt":["LambdaFunctionServiceRoleC555A460","Arn"]},"runtime":"nodejs12.x"}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"CiCdAwsPipelineDemoStack/test/LambdaStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"},"children":{"Default":{"id":"Default","path":"CiCdAwsPipelineDemoStack/test/LambdaStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.230.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CiCdAwsPipelineDemoStack/test/LambdaStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.230.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CiCdAwsPipelineDemoStack/test/LambdaStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.230.0"}}}}}},"prod":{"id":"prod","path":"CiCdAwsPipelineDemoStack/prod","constructInfo":{"fqn":"aws-cdk-lib.Stage","version":"2.230.0"},"children":{"LambdaStack":{"id":"LambdaStack","path":"CiCdAwsPipelineDemoStack/prod/LambdaStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.230.0"},"children":{"LambdaFunction":{"id":"LambdaFunction","path":"CiCdAwsPipelineDemoStack/prod/LambdaStack/LambdaFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CiCdAwsPipelineDemoStack/prod/LambdaStack/LambdaFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CiCdAwsPipelineDemoStack/prod/LambdaStack/LambdaFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/prod/LambdaStack/LambdaFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"Code":{"id":"Code","path":"CiCdAwsPipelineDemoStack/prod/LambdaStack/LambdaFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"CiCdAwsPipelineDemoStack/prod/LambdaStack/LambdaFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"CiCdAwsPipelineDemoStack/prod/LambdaStack/LambdaFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CiCdAwsPipelineDemoStack/prod/LambdaStack/LambdaFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-210615636037-us-east-2","s3Key":"d609efb58e3d1d45a8eca2e10c38177e8c5f81b2af952cb64ccae7c9b194c2c2.zip"},"environment":{"variables":{"stageName":"prod"}},"handler":"handler.handler","role":{"Fn::GetAtt":["LambdaFunctionServiceRoleC555A460","Arn"]},"runtime":"nodejs12.x"}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"CiCdAwsPipelineDemoStack/prod/LambdaStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"},"children":{"Default":{"id":"Default","path":"CiCdAwsPipelineDemoStack/prod/LambdaStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.230.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CiCdAwsPipelineDemoStack/prod/LambdaStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.230.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CiCdAwsPipelineDemoStack/prod/LambdaStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.230.0"}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"CiCdAwsPipelineDemoStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"},"children":{"Default":{"id":"Default","path":"CiCdAwsPipelineDemoStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.230.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CiCdAwsPipelineDemoStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.230.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CiCdAwsPipelineDemoStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.230.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.0.49"}}}}}